{
	"title": "Mouse Click Trickery",
	"version": "0.1",
	"maintainers": ["pseudometa"],
	"import-url": "karabiner://karabiner/assets/complex_modifications/import?url=https://github.com/chrisgrieser/dotfiles/blob/main/.config/karabiner/assets/complex_modifications/mouse-click-trickery.json",
	"homepage": "https://github.com/chrisgrieser/dotfiles/karabiner",
	"rules": [
		{
			"description": "M-Click: Quit app",
			"manipulators": [
				{
					"type": "basic",
					"from": {"pointing_button": "button3"},
					"to": [
						{
							"key_code": "q",
							"modifiers": ["command"]
						}
					],
					"conditions": [
						{
							"type": "frontmost_application_unless",
							"bundle_identifiers": [
								"^com\\.apple\\.finder$",
								"^com\\.hegenberg\\.BetterTouchTool$"
							]
						}
					]
				},
				{
					"type": "basic",
					"from": {"pointing_button": "button3"},
					"to": [
						{
							"key_code": "w",
							"modifiers": ["command"]
						}
					],
					"conditions": [
						{
							"type": "frontmost_application_if",
							"bundle_identifiers": [
								"^com\\.apple\\.finder$",
								"^com\\.hegenberg\\.BetterTouchTool$"
							]
						}
					]
				}
			]
		},
		{
			"description": "R-Click (tap): Open link (when in Browser)",
			"manipulators": [
				{
					"type": "basic",
					"from": {"pointing_button": "button2"},
					"to_if_held_down": [{"pointing_button": "button2"} ],
					"to": [{"pointing_button": "button3" } ],
					"conditions": [
						{
							"type": "frontmost_application_if",
							"bundle_identifiers": [
								"^com\\.vivaldi\\.Vivaldi$",
								"^org\\.chromium\\.Chromium$",
								"^com\\.google\\.Chrome$",
								"^com\\.brave\\.Browser$",
								"^com\\.apple\\.Safari$"
							]
						}
					],
					"parameters": {
						"basic.to_if_held_down_threshold_milliseconds": 30
					}
				}
			]
		},
		{
			"description": "Mouse-4 (hold): search selected text / open URL, (tap): send F13",
			"manipulators": [
				{
					"type": "basic",
					"from": {"pointing_button": "button4"},
					"to_if_alone": [{"key_code": "f13" } ],
					"to_if_held_down": [
						{
							"key_code": "c",
							"modifiers": ["command"]
						},
						{ "key_code": "vk_none", "hold_down_milliseconds": 50 },
						{ "shell_command": "SEL=$(pbpaste) ; if [[ \"$SEL\" =~ ^[[:space:]]*http.*[[:space:]]*$ ]]; then open \"$(echo \"$SEL\" | sed 's/ //g')\" ; else open \"https://www.google.com/search?q=$SEL\" ; fi"}
					],
					"parameters": {
						"basic.to_if_alone_timeout_milliseconds": 300,
						"basic.to_if_held_down_threshold_milliseconds": 300
					}
				}
			]
		},
		{
			"description": "Mouse-5 (hold): Super Key (⌘⌥⌃) / open URL, (tap): send F16",
			"manipulators": [
				{
					"type": "basic",
					"from": {"pointing_button": "button5"},
					"to_if_alone": [{"key_code": "f16" } ],
					"to_if_held_down": [
						{
							"key_code": "right_command",
							"modifiers": ["control", "option"]
						}
					],
					"parameters": {
						"basic.to_if_alone_timeout_milliseconds": 300,
						"basic.to_if_held_down_threshold_milliseconds": 300
					}
				}
			]
		},
		{
			"description": "Mouse-6 (Logitech MX3): Look up word under cursor in Dictionary",
			"manipulators": [
				{
					"type": "basic",
					"from": {
						"key_code": "tab",
						"modifiers": {"mandatory": ["left_command"] }
					},
					"conditions": [
					    {"identifiers": [{"product_id": 45901 } ], "type": "device_if"}
					],
					"to": [
						{
							"key_code": "d",
							"modifiers": ["command", "control"]
						}
					]
				}
			]
		}
	]
}
